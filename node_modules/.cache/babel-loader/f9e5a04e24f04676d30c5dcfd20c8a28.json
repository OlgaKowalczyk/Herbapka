{"ast":null,"code":"var _jsxFileName = \"/home/raniuszek/Desktop/Herbapka/Herbapka/src/ImageUpload.js\";\nimport React, { useState } from 'react';\nimport firebase from 'firebase';\nimport storage from './Firebase/firebase';\n\nconst UploadPhotos = () => {\n  const allInputs = {\n    imgUrl: ''\n  };\n  const [imageFile, setImageFile] = useState('');\n  const [imageUrl, setImageUrl] = useState(allInputs); // console.log('imageFile:', imageFile)\n\n  const handleImageFile = e => {\n    const image = e.target.files[0];\n    setImageFile(imageFile => image);\n  };\n\n  const handleFireBaseUpload = e => {\n    e.preventDefault();\n    console.log('start of upload'); // async magic goes here...\n\n    if (imageFile === '') {\n      console.error(`not an image, the image file is a ${typeof imageFile}`);\n    }\n\n    const uploadTask = storage.ref(`/images/${imageFile.name}`).put(imageFile); //initiates the firebase side uploading \n\n    uploadTask.on('state_changed', snapShot => {\n      //takes a snap shot of the process as it is happening\n      console.log('snapShot::', snapShot);\n    }, err => {\n      //catches the errors\n      console.log('imageError:', err);\n    }, () => {\n      // gets the functions from storage refences the image storage in firebase by the children\n      // gets the download url then sets the image from firebase as the value for the imgUrl key:\n      storage().ref('images').child(imageFile.name).getDownloadURL().then(fireBaseUrl => {\n        setImageUrl(prevObject => ({ ...prevObject,\n          imgUrl: fireBaseUrl\n        }));\n      });\n    });\n    console.log('imageUrl:', imageUrl);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"uploadPhotos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleFireBaseUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleImageFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"upload to firebase\")), /*#__PURE__*/React.createElement(\"img\", {\n    src: imageUrl.imgUrl,\n    alt: \"tea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default UploadPhotos;","map":{"version":3,"sources":["/home/raniuszek/Desktop/Herbapka/Herbapka/src/ImageUpload.js"],"names":["React","useState","firebase","storage","UploadPhotos","allInputs","imgUrl","imageFile","setImageFile","imageUrl","setImageUrl","handleImageFile","e","image","target","files","handleFireBaseUpload","preventDefault","console","log","error","uploadTask","ref","name","put","on","snapShot","err","child","getDownloadURL","then","fireBaseUrl","prevObject"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,OAAP,MAAoB,qBAApB;;AAGA,MAAMC,YAAY,GAAG,MAAM;AAEvB,QAAMC,SAAS,GAAG;AAACC,IAAAA,MAAM,EAAE;AAAT,GAAlB;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAACI,SAAD,CAAxC,CAJuB,CAMvB;;AAEA,QAAMM,eAAe,GAAIC,CAAD,IAAO;AAC3B,UAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAd;AACAP,IAAAA,YAAY,CAACD,SAAS,IAAKM,KAAf,CAAZ;AACH,GAHD;;AAKA,QAAMG,oBAAoB,GAAGJ,CAAC,IAAI;AAC9BA,IAAAA,CAAC,CAACK,cAAF;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAF8B,CAG9B;;AACA,QAAGZ,SAAS,KAAK,EAAjB,EAAqB;AACjBW,MAAAA,OAAO,CAACE,KAAR,CAAe,qCAAoC,OAAOb,SAAW,EAArE;AACH;;AACD,UAAMc,UAAU,GAAGlB,OAAO,CAACmB,GAAR,CAAa,WAAUf,SAAS,CAACgB,IAAK,EAAtC,EAAyCC,GAAzC,CAA6CjB,SAA7C,CAAnB,CAP8B,CAQ9B;;AACAc,IAAAA,UAAU,CAACI,EAAX,CAAc,eAAd,EACCC,QAAD,IAAc;AACV;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BO,QAA1B;AACH,KAJD,EAIIC,GAAD,IAAS;AACR;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BQ,GAA3B;AACH,KAPD,EAOG,MAAM;AACL;AACA;AACAxB,MAAAA,OAAO,GAAGmB,GAAV,CAAc,QAAd,EAAwBM,KAAxB,CAA8BrB,SAAS,CAACgB,IAAxC,EAA8CM,cAA9C,GACCC,IADD,CACMC,WAAW,IAAI;AACjBrB,QAAAA,WAAW,CAACsB,UAAU,KAAK,EAAC,GAAGA,UAAJ;AAAgB1B,UAAAA,MAAM,EAAEyB;AAAxB,SAAL,CAAX,CAAX;AACH,OAHD;AAIH,KAdD;AAeAb,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBV,QAAzB;AACH,GAzBD;;AA4BA,sBACI;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAM,IAAA,QAAQ,EAAEO,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,IAAI,EAAC,MADT;AAEI,IAAA,QAAQ,EAAEL,eAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BALJ,CADJ,eAQI;AAAK,IAAA,GAAG,EAAEF,QAAQ,CAACH,MAAnB;AAA2B,IAAA,GAAG,EAAC,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,CADJ;AAaH,CAtDD;;AAwDA,eAAeF,YAAf","sourcesContent":["import React, { useState } from 'react';\nimport firebase from 'firebase';\nimport storage from './Firebase/firebase';\n\n\nconst UploadPhotos = () => {\n\n    const allInputs = {imgUrl: ''};\n    const [imageFile, setImageFile] = useState('');\n    const [imageUrl, setImageUrl] = useState(allInputs);\n\n    // console.log('imageFile:', imageFile)\n    \n    const handleImageFile = (e) => {\n        const image = e.target.files[0];\n        setImageFile(imageFile => (image));\n    }\n\n    const handleFireBaseUpload = e => {\n        e.preventDefault()\n        console.log('start of upload')\n        // async magic goes here...\n        if(imageFile === '') {\n            console.error(`not an image, the image file is a ${typeof(imageFile)}`)\n        }\n        const uploadTask = storage.ref(`/images/${imageFile.name}`).put(imageFile)\n        //initiates the firebase side uploading \n        uploadTask.on('state_changed', \n        (snapShot) => {\n            //takes a snap shot of the process as it is happening\n            console.log('snapShot::', snapShot)\n        }, (err) => {\n            //catches the errors\n            console.log('imageError:', err)\n        }, () => {\n            // gets the functions from storage refences the image storage in firebase by the children\n            // gets the download url then sets the image from firebase as the value for the imgUrl key:\n            storage().ref('images').child(imageFile.name).getDownloadURL()\n            .then(fireBaseUrl => {\n                setImageUrl(prevObject => ({...prevObject, imgUrl: fireBaseUrl}))\n            })\n        })\n        console.log('imageUrl:', imageUrl);\n    }\n    \n \n    return (\n        <div className=\"uploadPhotos\">\n            <form onSubmit={handleFireBaseUpload}>\n                <input \n                    type=\"file\"\n                    onChange={handleImageFile}\n                />\n                <button>upload to firebase</button>\n            </form>\n            <img src={imageUrl.imgUrl} alt=\"tea\" />\n\n        </div>\n  );\n}\n\nexport default UploadPhotos;\n"]},"metadata":{},"sourceType":"module"}