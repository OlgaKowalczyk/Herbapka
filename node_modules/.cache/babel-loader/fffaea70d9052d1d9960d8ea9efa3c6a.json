{"ast":null,"code":"var _jsxFileName = \"/home/raniuszek/Desktop/Herbapka/Herbapka/src/ImageUpload.js\";\nimport React, { useState } from 'react';\nimport firebase from 'firebase';\nimport { storage } from 'firebase';\n\nconst UploadPhotos = () => {\n  const allInputs = {\n    imgUrl: ''\n  };\n  const [imageAsFile, setImageAsFile] = useState('');\n  const [imageAsUrl, setImageAsUrl] = useState('');\n  console.log('imageAsFile:', imageAsFile);\n\n  const handleImageAsFile = e => {\n    const image = e.target.files[0];\n    setImageAsFile(imageFile => image);\n  };\n\n  const handleFireBaseUpload = e => {\n    e.preventDefault();\n    console.log('start of upload'); // async magic goes here...\n\n    if (imageAsFile === '') {\n      console.error(`not an image, the image file is a ${typeof imageAsFile}`);\n    }\n\n    const uploadTask = storage.ref(`/images/${imageAsFile.name}`).put(imageAsFile); //initiates the firebase side uploading \n\n    uploadTask.on('state_changed', snapShot => {\n      //takes a snap shot of the process as it is happening\n      console.log('snapShot::', snapShot);\n    }, err => {\n      //catches the errors\n      console.log('imageError:', err);\n    }, () => {\n      // gets the functions from storage refences the image storage in firebase by the children\n      // gets the download url then sets the image from firebase as the value for the imgUrl key:\n      storage.ref('images').child(imageAsFile.name).getDownloadURL().then(fireBaseUrl => {\n        setImageAsUrl(prevObject => ({ ...prevObject,\n          imgUrl: fireBaseUrl\n        }));\n      });\n    });\n    console.log('imageAsUrl::', imageAsUrl);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"uploadPhotos\",\n    style: {\n      height: '400',\n      width: '500',\n      backgroundColor: 'white',\n      innerText: 'Hahaha'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleFireBaseUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleImageAsFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, \"upload to firebase\")), /*#__PURE__*/React.createElement(\"img\", {\n    src: imageAsUrl.imgUrl,\n    alt: \"image tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default UploadPhotos;","map":{"version":3,"sources":["/home/raniuszek/Desktop/Herbapka/Herbapka/src/ImageUpload.js"],"names":["React","useState","firebase","storage","UploadPhotos","allInputs","imgUrl","imageAsFile","setImageAsFile","imageAsUrl","setImageAsUrl","console","log","handleImageAsFile","e","image","target","files","imageFile","handleFireBaseUpload","preventDefault","error","uploadTask","ref","name","put","on","snapShot","err","child","getDownloadURL","then","fireBaseUrl","prevObject","height","width","backgroundColor","innerText"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,SAAQC,OAAR,QAAsB,UAAtB;;AAKA,MAAMC,YAAY,GAAG,MAAM;AAEvB,QAAMC,SAAS,GAAG;AAACC,IAAAA,MAAM,EAAE;AAAT,GAAlB;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACQ,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,EAAD,CAA5C;AAEAU,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BL,WAA5B;;AAEA,QAAMM,iBAAiB,GAAIC,CAAD,IAAO;AAC7B,UAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAd;AACAT,IAAAA,cAAc,CAACU,SAAS,IAAKH,KAAf,CAAd;AACH,GAHD;;AAKA,QAAMI,oBAAoB,GAAGL,CAAC,IAAI;AAC9BA,IAAAA,CAAC,CAACM,cAAF;AACAT,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAF8B,CAG9B;;AACA,QAAGL,WAAW,KAAK,EAAnB,EAAuB;AACnBI,MAAAA,OAAO,CAACU,KAAR,CAAe,qCAAoC,OAAOd,WAAa,EAAvE;AACH;;AACD,UAAMe,UAAU,GAAGnB,OAAO,CAACoB,GAAR,CAAa,WAAUhB,WAAW,CAACiB,IAAK,EAAxC,EAA2CC,GAA3C,CAA+ClB,WAA/C,CAAnB,CAP8B,CAQ9B;;AACAe,IAAAA,UAAU,CAACI,EAAX,CAAc,eAAd,EACCC,QAAD,IAAc;AACV;AACAhB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0Be,QAA1B;AACH,KAJD,EAIIC,GAAD,IAAS;AACR;AACAjB,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BgB,GAA3B;AACH,KAPD,EAOG,MAAM;AACL;AACA;AACAzB,MAAAA,OAAO,CAACoB,GAAR,CAAY,QAAZ,EAAsBM,KAAtB,CAA4BtB,WAAW,CAACiB,IAAxC,EAA8CM,cAA9C,GACCC,IADD,CACMC,WAAW,IAAI;AACjBtB,QAAAA,aAAa,CAACuB,UAAU,KAAK,EAAC,GAAGA,UAAJ;AAAgB3B,UAAAA,MAAM,EAAE0B;AAAxB,SAAL,CAAX,CAAb;AACH,OAHD;AAIH,KAdD;AAeArB,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BH,UAA5B;AACH,GAzBD;;AA4BA,sBACI;AAAK,IAAA,SAAS,EAAC,cAAf;AAA8B,IAAA,KAAK,EAAE;AAACyB,MAAAA,MAAM,EAAC,KAAR;AAAeC,MAAAA,KAAK,EAAE,KAAtB;AAA6BC,MAAAA,eAAe,EAAE,OAA9C;AAAuDC,MAAAA,SAAS,EAAE;AAAlE,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAM,IAAA,QAAQ,EAAElB,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,IAAI,EAAC,MADT;AAEI,IAAA,QAAQ,EAAEN,iBAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BALJ,CADJ,eAQI;AAAK,IAAA,GAAG,EAAEJ,UAAU,CAACH,MAArB;AAA6B,IAAA,GAAG,EAAC,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,CADJ;AAaH,CAtDD;;AA0DA,eAAeF,YAAf","sourcesContent":["import React, {useState} from 'react';\nimport firebase from 'firebase';\nimport {storage} from 'firebase';\n\n\n\n\nconst UploadPhotos = () => {\n\n    const allInputs = {imgUrl: ''};\n    const [imageAsFile, setImageAsFile] = useState('');\n    const [imageAsUrl, setImageAsUrl] = useState('');\n\n    console.log('imageAsFile:', imageAsFile)\n    \n    const handleImageAsFile = (e) => {\n        const image = e.target.files[0];\n        setImageAsFile(imageFile => (image));\n    }\n\n    const handleFireBaseUpload = e => {\n        e.preventDefault()\n        console.log('start of upload')\n        // async magic goes here...\n        if(imageAsFile === '') {\n            console.error(`not an image, the image file is a ${typeof(imageAsFile)}`)\n        }\n        const uploadTask = storage.ref(`/images/${imageAsFile.name}`).put(imageAsFile)\n        //initiates the firebase side uploading \n        uploadTask.on('state_changed', \n        (snapShot) => {\n            //takes a snap shot of the process as it is happening\n            console.log('snapShot::', snapShot)\n        }, (err) => {\n            //catches the errors\n            console.log('imageError:', err)\n        }, () => {\n            // gets the functions from storage refences the image storage in firebase by the children\n            // gets the download url then sets the image from firebase as the value for the imgUrl key:\n            storage.ref('images').child(imageAsFile.name).getDownloadURL()\n            .then(fireBaseUrl => {\n                setImageAsUrl(prevObject => ({...prevObject, imgUrl: fireBaseUrl}))\n            })\n        })\n        console.log('imageAsUrl::', imageAsUrl);\n    }\n    \n \n    return (\n        <div className=\"uploadPhotos\" style={{height:'400', width: '500', backgroundColor: 'white', innerText: 'Hahaha'}}>\n            <form onSubmit={handleFireBaseUpload}>\n                <input \n                    type=\"file\"\n                    onChange={handleImageAsFile}\n                />\n                <button>upload to firebase</button>\n            </form>\n            <img src={imageAsUrl.imgUrl} alt=\"image tag\" />\n\n        </div>\n  );\n}\n\n\n\nexport default UploadPhotos;\n"]},"metadata":{},"sourceType":"module"}